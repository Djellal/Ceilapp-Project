@page "/register-application-user"

@attribute [Authorize]

@inject Microsoft.Extensions.Localization.IStringLocalizer<RegisterApplicationUser> L
<PageTitle>Register Application User</PageTitle>

<div class="container">
    <RadzenRow Class="justify-content-center">
        <RadzenColumn SizeMD="8" SizeLG="6" SizeXL="4">
            <div class="card shadow-sm p-4 mt-4">
                <h2 class="text-center mb-4">Create New Account</h2>
                <RadzenTemplateForm Data="@user" TItem="Ceilapp.Models.ApplicationUser"
                    Visible="@(user != null)" Submit="@FormSubmit">
                    
                    <RadzenAlert class="mb-4" Shade="Shade.Dark" Variant="Variant.Filled" 
                        Size="AlertSize.Small" AlertStyle="AlertStyle.Danger" 
                        Visible="@errorVisible">@error</RadzenAlert>

                    <RadzenStack Gap="1.5rem">
                        <RadzenFormField Text="Email" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenTextBox class="w-100" 
                                    @bind-Value="@(user.Email)" 
                                    Name="UserName"
                                    Placeholder="Enter your email" />
                            </ChildContent>
                            <Helper>
                                <RadzenRequiredValidator Component="UserName" 
                                    Text="Email is required" 
                                    Style="color: var(--rz-danger);" />
                            </Helper>
                        </RadzenFormField>

                        <RadzenFormField Text="Password" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenPassword class="w-100"
                                    @bind-Value="@(user.Password)" 
                                    Name="Password"
                                    Placeholder="Enter your password" />
                            </ChildContent>
                            <Helper>
                                <RadzenRequiredValidator Component="Password" 
                                    Text="Password is required"
                                    Style="color: var(--rz-danger);" />
                            </Helper>
                        </RadzenFormField>

                        <RadzenFormField Text="Confirm Password" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenPassword class="w-100"
                                    @bind-Value="@(user.ConfirmPassword)" 
                                    Name="ConfirmPassword"
                                    Placeholder="Confirm your password" />
                            </ChildContent>
                            <Helper>
                                <RadzenRequiredValidator Component="ConfirmPassword" 
                                    Text="Password confirmation is required"
                                    Style="color: var(--rz-danger);" />
                            </Helper>
                        </RadzenFormField>
                    </RadzenStack>

                    <RadzenStack class="mt-4" 
                        Orientation="Orientation.Horizontal" 
                        AlignItems="AlignItems.Center" 
                        JustifyContent="JustifyContent.Center" 
                        Gap="1rem">
                        <RadzenButton ButtonType="ButtonType.Submit" 
                            Icon="person_add" 
                            Text="Create Account" 
                            IsBusy="@isBusy" 
                            BusyText="Creating account..." 
                            ButtonStyle="ButtonStyle.Primary"
                            Size="ButtonSize.Large"
                            class="px-5" />
                        <RadzenButton ButtonStyle="ButtonStyle.Light" 
                            Text="Cancel" 
                            Click="@CancelClick" 
                            Variant="Variant.Outlined"
                            Size="ButtonSize.Large" />
                    </RadzenStack>
                </RadzenTemplateForm>
            </div>
        </RadzenColumn>
    </RadzenRow>
</div>
